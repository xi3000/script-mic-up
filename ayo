-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")
local GuiService = game:GetService("GuiService")

-- Variables
local flying = false
local flySpeed = 5
local flyConnection
local superSpeed = false
local superJump = false
local speedValue = 16
local jumpValue = 50
local moveVector = Vector3.new(0,0,0)

-- Functions
local function setSpeed(value)
	speedValue = value
	if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
		LocalPlayer.Character.Humanoid.WalkSpeed = superSpeed and value*5 or value
	end
end

local function setJump(value)
	jumpValue = value
	if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
		LocalPlayer.Character.Humanoid.JumpPower = superJump and value*5 or value
	end
end

local function tpToPlayer(targetName)
	local target = Players:FindFirstChild(targetName)
	if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
		LocalPlayer.Character:MoveTo(target.Character.HumanoidRootPart.Position + Vector3.new(0,3,0))
	else
		warn("Không tìm thấy người chơi:", targetName)
	end
end

local function getPlayerList()
	local list = {}
	for _, p in ipairs(Players:GetPlayers()) do
		if p ~= LocalPlayer then list[p.Name]=p.Name end
	end
	return list
end

-- Fly
local function startFly()
	if flying then return end
	flying = true
	local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
	if not hrp then return end
	local bg = Instance.new("BodyGyro", hrp)
	bg.P = 9e4
	bg.MaxTorque = Vector3.new(9e9,9e9,9e9)
	bg.CFrame = hrp.CFrame
	local bv = Instance.new("BodyVelocity", hrp)
	bv.MaxForce = Vector3.new(9e9,9e9,9e9)
	bv.Velocity = Vector3.new(0,0,0)
	flyConnection = RunService.RenderStepped:Connect(function()
		local camCF = workspace.CurrentCamera.CFrame
		bv.Velocity = moveVector.Unit*flySpeed
		bg.CFrame = camCF
	end)
end

local function stopFly()
	if not flying then return end
	flying = false
	if flyConnection then flyConnection:Disconnect() end
	local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
	if hrp then
		if hrp:FindFirstChildOfClass("BodyGyro") then hrp:FindFirstChildOfClass("BodyGyro"):Destroy() end
		if hrp:FindFirstChildOfClass("BodyVelocity") then hrp:FindFirstChildOfClass("BodyVelocity"):Destroy() end
	end
end

--// Library + Window
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/lxte/lates-lib/main/Main.lua"))()
local Window = Library:CreateWindow({
	Title = "Player Hacks (Mobile Support)",
	Theme = "Dark",
	Size = UDim2.fromOffset(600,400),
	Transparency = 0.2,
	Blurring = true,
	MinimizeKeybind = Enum.KeyCode.LeftAlt,
})

Window:SetTheme({Dark={Primary=Color3.fromRGB(30,30,30),Secondary=Color3.fromRGB(35,35,35),Component=Color3.fromRGB(40,40,40),Interactables=Color3.fromRGB(45,45,45),Tab=Color3.fromRGB(200,200,200),Title=Color3.fromRGB(240,240,240),Description=Color3.fromRGB(200,200,200),Shadow=Color3.fromRGB(0,0,0),Outline=Color3.fromRGB(40,40,40),Icon=Color3.fromRGB(220,220,220)}})
Window:AddTabSection({Name="Main",Order=1})
Window:AddTabSection({Name="Settings",Order=2})
local Main = Window:AddTab({Title="Main Controls",Section="Main",Icon="rbxassetid://11963373994"})

-- Speed
Window:AddSlider({Title="Walk Speed",Description="Chỉnh tốc độ chạy (max 100)",Tab=Main,MaxValue=100,Callback=setSpeed})
Window:AddButton({Title="Super Speed x5",Description="Chạy nhanh gấp 5 lần",Tab=Main,Callback=function() superSpeed=true setSpeed(speedValue) end})

-- Jump
Window:AddSlider({Title="Jump Power",Description="Chỉnh độ cao nhảy (max 100)",Tab=Main,MaxValue=100,Callback=setJump})
Window:AddButton({Title="Super Jump x5",Description="Nhảy cao gấp 5 lần",Tab=Main,Callback=function() superJump=true setJump(jumpValue) end})

-- Fly
Window:AddToggle({Title="Fly",Description="Bật/tắt bay",Tab=Main,Callback=function(state) if state then startFly() else stopFly() end end})
Window:AddSlider({Title="Fly Speed",Description="Tốc độ bay",Tab=Main,MaxValue=20,Callback=function(value) flySpeed=value end})

-- Dropdown + TP
local selectedPlayer = nil
local playerDropdown
playerDropdown = Window:AddDropdown({Title="Chọn người chơi",Description="Chọn tên để teleport",Tab=Main,Options=getPlayerList(),Callback=function(Name) selectedPlayer=Name end})
Window:AddButton({Title="Teleport",Description="Dịch chuyển đến người chơi đã chọn",Tab=Main,Callback=function() if selectedPlayer then tpToPlayer(selectedPlayer) else warn("Chưa chọn người chơi!") end end})
Window:AddButton({Title="Refresh Players",Description="Cập nhật danh sách người chơi",Tab=Main,Callback=function() playerDropdown:SetOptions(getPlayerList()) Window:Notify({Title="Refresh",Description="Danh sách đã cập nhật",Duration=3}) end})

-- Mobile Fly Controls
local screenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
screenGui.Name = "FlyControls"

-- Up button
local upButton = Instance.new("TextButton",screenGui)
upButton.Text="↑"
upButton.Size=UDim2.new(0,60,0,60)
upButton.Position=UDim2.new(0,50,1,-150)
upButton.BackgroundTransparency=0.5
upButton.InputBegan:Connect(function() moveVector=moveVector+Vector3.new(0,1,0) end)
upButton.InputEnded:Connect(function() moveVector=moveVector-Vector3.new(0,1,0) end)

-- Down button
local downButton = Instance.new("TextButton",screenGui)
downButton.Text="↓"
downButton.Size=UDim2.new(0,60,0,60)
downButton.Position=UDim2.new(0,50,1,-80)
downButton.BackgroundTransparency=0.5
downButton.InputBegan:Connect(function() moveVector=moveVector-Vector3.new(0,1,0) end)
downButton.InputEnded:Connect(function() moveVector=moveVector+Vector3.new(0,1,0) end)

-- Left button
local leftButton = Instance.new("TextButton",screenGui)
leftButton.Text="←"
leftButton.Size=UDim2.new(0,60,0,60)
leftButton.Position=UDim2.new(0,0,1,-115)
leftButton.BackgroundTransparency=0.5
leftButton.InputBegan:Connect(function() moveVector=moveVector-workspace.CurrentCamera.CFrame.RightVector end)
leftButton.InputEnded:Connect(function() moveVector=moveVector+workspace.CurrentCamera.CFrame.RightVector end)

-- Right button
local rightButton = Instance.new("TextButton",screenGui)
rightButton.Text="→"
rightButton.Size=UDim2.new(0,60,0,60)
rightButton.Position=UDim2.new(0,100,1,-115)
rightButton.BackgroundTransparency=0.5
rightButton.InputBegan:Connect(function() moveVector=moveVector+workspace.CurrentCamera.CFrame.RightVector end)
rightButton.InputEnded:Connect(function() moveVector=moveVector-workspace.CurrentCamera.CFrame.RightVector end)

-- Show/hide menu button for mobile
local toggleMenuButton = Instance.new("TextButton",screenGui)
toggleMenuButton.Text="Menu"
toggleMenuButton.Size=UDim2.new(0,80,0,40)
toggleMenuButton.Position=UDim2.new(1,-100,0,50)
toggleMenuButton.BackgroundTransparency=0.5
toggleMenuButton.MouseButton1Click:Connect(function()
	Window:SetVisibility(not Window:GetVisibility())
end)

Window:Notify({Title="UI Loaded!",Description="Hỗ trợ Mobile. Dùng nút Menu để ẩn/hiện UI",Duration=5})
